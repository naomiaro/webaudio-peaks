!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.WebaudioPeaks=r():e.WebaudioPeaks=r()}(self,(function(){return(()=>{"use strict";var e={10:e=>{function r(e){for(var r,n=1/0,t=-1/0,o=0,u=e.length;o<u;o++)n>(r=e[o])&&(n=r),t<r&&(t=r);return{min:n,max:t}}function n(e,r){var n=Math.pow(2,r-1),t=e<0?e*n:e*(n-1);return Math.max(-n,Math.min(n-1,t))}function t(e,t,u){var a,f,i,s,p,c,l=e.length,h=Math.ceil(l/t),b=o(u,2*h);for(a=0;a<h;a++)f=a*t,i=(a+1)*t>l?l:(a+1)*t,p=n((c=r(e.subarray(f,i))).min,u),s=n(c.max,u),b[2*a]=p,b[2*a+1]=s;return b}function o(e,r){return new(new Function(`return Int${e}Array`)())(r)}function u(e,r){return"number"==typeof e?e:r}e.exports=function(e,r,n,a,f,i){if(r=u(r,1e3),i=u(i,16),null==n&&(n=!0),[8,16,32].indexOf(i)<0)throw new Error("Invalid number of bits specified for peaks.");var s,p,c=e.numberOfChannels,l=[];if(a=u(a,0),f=u(f,e.length),void 0===e.subarray)for(s=0;s<c;s++)p=e.getChannelData(s).subarray(a,f),l.push(t(p,r,i));else l.push(t(e.subarray(a,f),r,i));return n&&l.length>1&&(l=function(e,r){var n,t,u=e.length,a=1/u,f=e[0].length/2,i=0,s=0,p=o(r,2*f);for(s=0;s<f;s++){for(n=0,t=0,i=0;i<u;i++)n+=a*e[i][2*s],t+=a*e[i][2*s+1];p[2*s]=n,p[2*s+1]=t}return[p]}(l,i)),{length:l[0].length/2,data:l,bits:i}}}},r={};return function n(t){var o=r[t];if(void 0!==o)return o.exports;var u=r[t]={exports:{}};return e[t](u,u.exports,n),u.exports}(10)})()}));